$.fn.formProgressBar=function(e){var r={readCount:!1,validClass:"valid",invalidClass:"error",percentCounting:!1,transitionTime:0,height:10,transitionType:"ease",element:"body"},t=$.extend({},r,e);$(r.element).prepend("<div id='jQueryProgressFormBar'><div></div></div>"),$("#jQueryProgressFormBar").css("position","fixed").css("top",0).css("left",0).css("width","100%").css("height",t.height).css("z-index",1e4),$("#jQueryProgressFormBar>div").css({WebkitTransition:"all "+t.transitionTime+"ms "+t.transitionType,MozTransition:"all "+t.transitionTime+"ms "+t.transitionType,MsTransition:"all "+t.transitionTime+"ms "+t.transitionType,OTransition:"all "+t.transitionTime+"ms "+t.transitionType,transition:"all "+t.transitionTime+"ms "+t.transitionType}).css("height",t.height),this.elementsRequied=function(){var e=$(this).find("input[required], textarea[required], select[required]").toArray();return arr=[],e.map(function(e){arr[e.name]=0,e.checked&&(arr[e.name]=1)}),arr},this.refresh=function(){s=this.elementsRequied()},this.renderBar=function(){var e=0,r=0,a=!1;for(var i in s)1==s[i]&&e++,-1==s[i]&&(a=!0),r++;var n=(e/r*100).toFixed(2);t.percentCounting&&$("#jQueryProgressFormBar>div").text(Math.round(n)+" %"),$("#jQueryProgressFormBar>div").css("width",n+"%"),1==a?$("#jQueryProgressFormBar>div").addClass("warn"):$("#jQueryProgressFormBar>div").removeClass("warn").removeClass("error")},this.bindElements=function(){var e=this.renderBar;if($(this).find("input[required], textarea[required], select[required]").change(function(){if(t.readCount)switch($(this).attr("type")){case"checkbox":case"radio":$(this).is(":checked")?s[$(this).attr("name")]=1:s[$(this).attr("name")]=-1}else switch($(this).prop("nodeName")){case"INPUT":switch($(this).attr("type")){case"text":""!=$(this).val()?s[$(this).attr("name")]=1:s[$(this).attr("name")]=-1;break;case"email":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String($(this).val()).toLowerCase())?s[$(this).attr("name")]=1:s[$(this).attr("name")]=-1;break;case"number":$.isNumeric($(this).val())?s[$(this).attr("name")]=1:s[$(this).attr("name")]=-1;break;case"checkbox":case"radio":$(this).is(":checked")?s[$(this).attr("name")]=1:s[$(this).attr("name")]=-1}break;case"SELECT":""!=$(this).val()?s[$(this).attr("name")]=1:s[$(this).attr("name")]=-1}e()}),t.readCount){var r=$(this).find("input[required], textarea[required], select[required]"),a=new MutationObserver(function(r){r.forEach(function(r){"class"===r.attributeName&&($(r.target).hasClass(t.validClass)?s[$(r.target).attr("name")]=1:$(r.target).hasClass(t.invalidClass)&&(s[$(r.target).attr("name")]=-1),e())})});r.map(function(e){a.observe(r[e],{attributes:!0})})}$(this).submit(function(e){if($("#jQueryProgressFormBar>div").hasClass("warn"))return $("#jQueryProgressFormBar>div").removeClass("warn").addClass("error"),void e.preventDefault();var r=0;for(var t in s)1==s[t]&&r++,length++;if(r!=length)return $("#jQueryProgressFormBar>div").removeClass("warn").addClass("error"),void e.preventDefault();$("#jQueryProgressFormBar>div").removeClass("warn").removeClass("error")})};var s=this.elementsRequied();return this.bindElements(),this},$.fn.formProgressBar;